# =============================================================================
# FP&A Platform - Environment Variables Template
# =============================================================================
# Copy this file to .env.local for development
# For production, set these in your hosting platform (Vercel, Railway, etc.)

# =============================================================================
# APPLICATION
# =============================================================================
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_NAME="FP&A Variance Analyzer"
NEXT_PUBLIC_APP_VERSION=1.0.0

# =============================================================================
# DATABASE
# =============================================================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database?sslmode=require
DATABASE_URL=postgresql://postgres:password@localhost:5432/fpna_dev

# For production, use a managed database service:
# - Neon: postgresql://user:pass@ep-cool-name.us-east-2.aws.neon.tech/neondb
# - Supabase: postgresql://postgres:pass@db.project.supabase.co:5432/postgres
# - Railway: postgresql://user:pass@containers-us-west.railway.app:5432/railway

# Connection pool settings (optional)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# =============================================================================
# REDIS CACHE
# =============================================================================
# Redis connection string for caching
# Local: redis://localhost:6379
# Upstash: redis://default:password@region.upstash.io:port
REDIS_URL=redis://localhost:6379

# Redis cache TTL (seconds)
REDIS_CACHE_TTL=3600

# =============================================================================
# MONDAY.COM OAUTH
# =============================================================================
# Get these from: https://auth.monday.com/oauth2/authorize
# Developer Portal: https://monday.com/developers/apps

MONDAY_CLIENT_ID=your_monday_client_id_here
MONDAY_CLIENT_SECRET=your_monday_client_secret_here

# OAuth callback URL (must match Monday app settings)
MONDAY_REDIRECT_URI=http://localhost:3000/api/auth/monday/callback

# Monday API Configuration
MONDAY_API_URL=https://api.monday.com/v2
MONDAY_API_VERSION=2024-01

# Monday App Signing Secret (for webhook verification)
MONDAY_SIGNING_SECRET=your_monday_signing_secret_here

# =============================================================================
# QUICKBOOKS OAUTH
# =============================================================================
# Get these from: https://developer.intuit.com/app/developer/dashboard
# Create an app and enable QuickBooks Online API

QUICKBOOKS_CLIENT_ID=your_quickbooks_client_id_here
QUICKBOOKS_CLIENT_SECRET=your_quickbooks_client_secret_here

# OAuth callback URL (must match Intuit app settings)
QUICKBOOKS_REDIRECT_URI=http://localhost:3000/api/auth/quickbooks/callback

# QuickBooks Environment (sandbox or production)
QUICKBOOKS_ENVIRONMENT=sandbox
QUICKBOOKS_SANDBOX_BASE_URL=https://sandbox-quickbooks.api.intuit.com
QUICKBOOKS_DISCOVERY_DOCUMENT=https://appcenter.intuit.com/api/v1/connection/reconnect

# For production, use:
# QUICKBOOKS_ENVIRONMENT=production
# QUICKBOOKS_API_URL=https://quickbooks.api.intuit.com

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# JWT Secret for session tokens (generate with: openssl rand -base64 32)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Better Auth (if using)
BETTER_AUTH_SECRET=your-secret-key-here
BETTER_AUTH_URL=http://localhost:3000

# Session expiration (milliseconds)
SESSION_EXPIRY=604800000

# Cookie settings
COOKIE_SECURE=false
COOKIE_DOMAIN=localhost

# For production:
# COOKIE_SECURE=true
# COOKIE_DOMAIN=.yourapp.com

# CSRF Protection Secret
CSRF_SECRET=your-csrf-secret-key-change-this-in-production

# =============================================================================
# ENCRYPTION
# =============================================================================
# Encryption key for sensitive data (OAuth tokens, etc.)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=your-encryption-key-64-characters-long-change-this-in-production

# =============================================================================
# n8n INTEGRATION
# =============================================================================
# API key for n8n workflow authentication
# This is used to secure API endpoints called by n8n workflows
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
N8N_API_KEY=7YCV0vazDSwvro4HuR7rKQQ67lImK2H5rfQ9jRCnUps=

# n8n webhook endpoints (if using webhooks)
N8N_WEBHOOK_URL=https://your-n8n-instance.com/webhook/fpa-platform

# =============================================================================
# MONITORING & ERROR TRACKING
# =============================================================================
# Sentry DSN for error tracking
# Get from: https://sentry.io/settings/projects/
NEXT_PUBLIC_SENTRY_DSN=https://examplePublicKey@o0.ingest.sentry.io/0

# Sentry configuration
SENTRY_ORG=your-sentry-org
SENTRY_PROJECT=fpna-platform
SENTRY_AUTH_TOKEN=your-sentry-auth-token

# Sentry environment
SENTRY_ENVIRONMENT=development

# Sample rate for performance monitoring (0.0 - 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# LOGGING
# =============================================================================
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Enable pretty printing in development
LOG_PRETTY=true

# Log to file (optional)
LOG_FILE_PATH=./logs/app.log

# =============================================================================
# RATE LIMITING
# =============================================================================
# Rate limit configuration (requests per minute)
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX_REQUESTS=100

# Monday API rate limits
MONDAY_RATE_LIMIT_COMPLEXITY=10000000

# QuickBooks API rate limits
QUICKBOOKS_RATE_LIMIT_RPM=500

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable/disable features
FEATURE_AI_INSIGHTS=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_SLACK_INTEGRATION=false
FEATURE_EXPORT_CSV=true
FEATURE_EXPORT_PDF=false

# =============================================================================
# EMAIL (for notifications)
# =============================================================================
# Email service provider (sendgrid, resend, smtp)
EMAIL_PROVIDER=sendgrid

# SendGrid
SENDGRID_API_KEY=your-sendgrid-api-key

# Resend
RESEND_API_KEY=your-resend-api-key

# SMTP (alternative)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@yourapp.com

# =============================================================================
# AI / OPENAI (for insights generation)
# =============================================================================
# OpenAI API key for AI insights
OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI model
OPENAI_MODEL=gpt-4-turbo-preview

# OpenAI temperature (0.0 - 2.0)
OPENAI_TEMPERATURE=0.7

# Max tokens for AI responses
OPENAI_MAX_TOKENS=500

# =============================================================================
# SLACK INTEGRATION (optional)
# =============================================================================
# Slack webhook URL for notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXX

# Slack bot token
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token

# =============================================================================
# WEBHOOK ENDPOINTS
# =============================================================================
# Internal webhook secret for secure communication
WEBHOOK_SECRET=your-webhook-secret-key-change-this-in-production

# Monday webhook verification
MONDAY_WEBHOOK_SECRET=your-monday-webhook-secret

# =============================================================================
# ANALYTICS (optional)
# =============================================================================
# Google Analytics
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# PostHog
NEXT_PUBLIC_POSTHOG_KEY=phc_your_posthog_key
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# Mixpanel
NEXT_PUBLIC_MIXPANEL_TOKEN=your-mixpanel-token

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Allowed origins for CORS (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourapp.com

# =============================================================================
# CRON JOBS / SCHEDULED TASKS
# =============================================================================
# Cron secret for securing cron endpoints
CRON_SECRET=your-cron-secret-key-change-this-in-production

# Sync schedule (cron expressions)
SYNC_SCHEDULE_BUDGET=0 */6 * * *
SYNC_SCHEDULE_ACTUAL=0 */4 * * *
SYNC_SCHEDULE_VARIANCE=0 */1 * * *

# =============================================================================
# DEVELOPMENT / TESTING
# =============================================================================
# Skip OAuth in development (use mock data)
DEV_SKIP_OAUTH=false

# Mock user ID for development
DEV_MOCK_USER_ID=dev-user-123

# Enable debug mode
DEBUG=false

# Disable SSL verification (dev only - NEVER in production)
NODE_TLS_REJECT_UNAUTHORIZED=1

# =============================================================================
# DEPLOYMENT
# =============================================================================
# Vercel configuration
VERCEL_ENV=development
VERCEL_URL=
VERCEL_GIT_COMMIT_SHA=

# Railway configuration
RAILWAY_ENVIRONMENT=development
RAILWAY_PUBLIC_DOMAIN=

# Build configuration
SKIP_ENV_VALIDATION=false
ANALYZE_BUNDLE=false

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================
# S3-compatible storage for backups (optional)
BACKUP_S3_ENDPOINT=https://s3.amazonaws.com
BACKUP_S3_BUCKET=fpna-backups
BACKUP_S3_ACCESS_KEY=your-s3-access-key
BACKUP_S3_SECRET_KEY=your-s3-secret-key

# Backup schedule
BACKUP_SCHEDULE=0 2 * * *

# =============================================================================
# COMPLIANCE & SECURITY
# =============================================================================
# Data retention period (days)
DATA_RETENTION_DAYS=2555

# Enable audit logging
AUDIT_LOGGING_ENABLED=true

# Content Security Policy
CSP_REPORT_URI=https://yourapp.com/api/csp-report

# =============================================================================
# MULTI-TENANCY
# =============================================================================
# Enable multi-tenant mode
MULTI_TENANT_ENABLED=true

# Tenant isolation level (database, schema, row)
TENANT_ISOLATION_LEVEL=row

# =============================================================================
# PERFORMANCE
# =============================================================================
# Enable response compression
ENABLE_COMPRESSION=true

# Cache control max age (seconds)
CACHE_MAX_AGE=3600

# Enable CDN for static assets
ENABLE_CDN=false
CDN_URL=https://cdn.yourapp.com

# =============================================================================
# LOCALIZATION
# =============================================================================
# Default locale
DEFAULT_LOCALE=en-US

# Supported locales (comma-separated)
SUPPORTED_LOCALES=en-US,en-GB,es-ES,fr-FR

# Default currency
DEFAULT_CURRENCY=USD

# Default timezone
DEFAULT_TIMEZONE=America/New_York
